<section class="mx-auto max-w-4xl px-4 py-6">
  <div>
    <h2 class="text-2xl font-semibold">Cadastro de Cliente</h2>
    <hr class="my-4 border-muted/30" />

    <mat-card class="p-4 rounded-2xl shadow-sm">
      <form [formGroup]="clienteForm" (ngSubmit)="cadastrar()">
        <mat-card-header>
          <mat-card-title class="text-lg font-medium">
            Preencha o formulário de cadastro
          </mat-card-title>
        </mat-card-header>

        <mat-card-content class="mt-6 space-y-4">
          <mat-form-field appearance="fill" class="w-full">
            <mat-label>Nome do Cliente</mat-label>
            <input formControlName="nome" matInput type="text" />
            @if (nome?.errors?.['required']) {
              <mat-error>O nome do cliente é obrigatório.</mat-error>
            }
            @if (nome?.errors?.['minlength']) {
              <mat-error>O nome do cliente deve conter no mínimo 3 caracteres.</mat-error>
            }
          </mat-form-field>

          <!-- Documento -->
          <mat-form-field appearance="fill" class="w-full">
            <mat-label>Documento do Cliente</mat-label>
            <input formControlName="documento" matInput type="text" />
            @if (documento?.errors?.['required']) {
              <mat-error>O documento do cliente é obrigatório.</mat-error>
            }
            @if (documento?.errors?.['minlength']) {
              <mat-error>O documento do cliente deve conter no mínimo 11 caracteres.</mat-error>
            }
          </mat-form-field>

          <!-- Telefone -->
          <mat-form-field appearance="fill" class="w-full">
            <mat-label>Telefone do Cliente</mat-label>
            <input formControlName="telefone" matInput type="text" />
            @if (telefone?.errors?.['required']) {
              <mat-error>O telefone do cliente é obrigatório.</mat-error>
            }
            @if (telefone?.errors?.['minlength']) {
              <mat-error>O telefone do cliente deve conter no mínimo 8 caracteres.</mat-error>
            }
          </mat-form-field>

          <!-- Tipo Cliente -->
          <mat-form-field appearance="fill" class="w-full">
            <mat-select formControlName="tipoCliente">
              @for (tipo of tiposClientes; track $index) {
                <mat-option [value]="tipo">{{ tipo }}</mat-option>
              }
            </mat-select>
            @if (tipoCliente?.hasError('required')) {
              <mat-error>O tipo do cliente é obrigatório.</mat-error>
            }
          </mat-form-field>

          <!-- CNH opcional (só PF) -->
          @if (tipoCliente?.value == 'Pessoa Fisica') {
            <mat-form-field appearance="fill" class="w-full">
              <mat-label>CNH</mat-label>
              <input formControlName="cnh" matInput type="text" />
            </mat-form-field>
          }

          <!-- Endereço -->
          <div formGroupName="endereco" class="space-y-4">
            <mat-form-field class="w-full">
              <mat-label>Logradouro</mat-label>
              <input formControlName="logradouro" matInput />
              @if (endereco.get('logradouro')?.errors?.['required']) {
                <mat-error>Logradouro é obrigatório</mat-error>
              }
            </mat-form-field>

            <mat-form-field class="w-full">
              <mat-label>Número</mat-label>
              <input formControlName="numero" matInput type="number" />
              @if (endereco.get('numero')?.errors?.['required']) {
                <mat-error>Número é obrigatório</mat-error>
              }
            </mat-form-field>

            <mat-form-field class="w-full">
              <mat-label>Bairro</mat-label>
              <input formControlName="bairro" matInput />
              @if (endereco.get('bairro')?.errors?.['required']) {
                <mat-error>Bairro é obrigatório</mat-error>
              }
            </mat-form-field>

            <mat-form-field class="w-full">
              <mat-label>Cidade</mat-label>
              <input formControlName="cidade" matInput />
              @if (endereco.get('cidade')?.errors?.['required']) {
                <mat-error>Cidade é obrigatória</mat-error>
              }
            </mat-form-field>

            <mat-form-field class="w-full">
              <mat-label>Estado</mat-label>
              <input formControlName="estado" matInput />
              @if (endereco.get('estado')?.errors?.['required']) {
                <mat-error>Estado é obrigatório</mat-error>
              }
            </mat-form-field>
          </div>

        </mat-card-content>

        <mat-card-actions align="end" class="flex items-center justify-end gap-3 pt-4">
          <a mat-stroked-button routerLink="/clientes" class="px-4">Voltar</a>
          <button type="submit" [disabled]="clienteForm.invalid" mat-flat-button class="px-6">
            <mat-icon class="!text-base mr-1">check</mat-icon>
            Concluir
          </button>
        </mat-card-actions>
      </form>
    </mat-card>
  </div>
</section>
